
maven-jar-job:
  stage: build
  script:
    - |
      echo "maven build start"
      
      mkdir -p $GITLAB_UTILS_PATH
      tar xf gitlab_utils.tar -C $GITLAB_UTILS_PATH
      
      cp $GITLAB_UTILS_PATH/tool/mvnw ./mvnw
      mkdir ./.mvn
      cp -R $GITLAB_UTILS_PATH/tool/mvn/* ./.mvn/
      
      #MAVEN_OPTS="-Dmaven.repo.local=$CI_PROJECT_DIR/.m2/repository --settings $GITLAB_UTILS_PATH/conf/settings.xml"
      ./mvnw $MAVEN_OPTS -Dmaven.test.skip=true clean package
      cp target/application-*-SNAPSHOT.jar target/application.jar
      
      echo "maven build finish"
  artifacts:
    paths:
      - target/application.jar
