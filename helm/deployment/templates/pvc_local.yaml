apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: "{{ .Values.container.name }}-local-storage"
provisioner: kubernetes.io/no-provisioner
volumeBindingMode: WaitForFirstConsumer
reclaimPolicy: Retain
---
apiVersion: v1
kind: PersistentVolume
metadata:
  name: "{{ .Values.container.name }}-pv"
  labels:
    type: local
spec:
  capacity:
    storage: 10Gi
  accessModes:
  - ReadWriteOnce
  persistentVolumeReclaimPolicy: Retain
  storageClassName: "{{ .Values.container.name }}-local-storage"
  hostPath:
    path: '/data/docker_volume'
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: "{{ .Values.container.name }}-pvc"
  labels:
    pv: "{{ .Values.container.name }}-pv"
spec:
  accessModes:
    - ReadWriteOnce
  storageClassName: "{{ .Values.container.name }}-local-storage"
  resources:
    requests:
      storage: 1Gi
